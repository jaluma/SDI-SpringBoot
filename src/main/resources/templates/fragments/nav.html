<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4" lang="en">
	<body>
	<th:block th:fragment="nav">
		<nav class="navbar navbar-expand-lg navbar-dark indigo" xmlns:th="http://www.thymeleaf.org"
		     xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
			<!-- Navbar brand -->
			<a class="navbar-brand" href="/">MyWallapop</a>
			
			<!-- Collapse button -->
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#basicExampleNav" aria-controls="basicExampleNav"
			        aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			
			<!-- Collapsible content -->
			<div class="collapse navbar-collapse" id="basicExampleNav">
		
				<!-- Links -->
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active">
						<a class="nav-link" id="homeMenu" href="/home" sec:authorize="isAuthenticated()" th:text="#{nav.home}">
							Inicio
						</a>
					</li>
					<li class="nav-item active">
						<a class="nav-link" id="adminListMenu" href="/admin/list" sec:authorize="hasRole('ROLE_ADMIN')" th:text="#{nav.users}">
							Listado de usuarios
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="/sell/add" sec:authorize="hasRole('ROLE_STANDARD')" th:text="#{nav.sales}">
							Ofertas
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#" sec:authorize="hasRole('ROLE_STANDARD')" th:text="#{nav.chats}">
							Chats
						</a>
					</li>
				</ul>
				
				<ul class="navbar-nav ml-auto nav-flex-icons navbar-right">
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
						   aria-expanded="false">
							<!--<img src="/img/language-solid.png" alt="language image" height="35">-->
							<i class="material-icons">language</i>
						</a>
						<div class="dropdown-menu dropdown-menu-right dropdown-info" id="languageDropdownMenuButton"
						     aria-labelledby="navbarDropdownMenuLink">
							<a id="btnEnglish" value="EN" class="dropdown-item">
								<img th:src="@{/img/if_uk_flag.png}" style="border: 0; float: left; margin-right: 15px" alt="EN" src=""/>
								<span th:text="#{language.en}">Inglés</span>
							</a>
							<a id="btnSpanish" value="ES" class="dropdown-item">
								<img th:src="@{/img/if_spain_flag.png}" style="border: 0; float: left; margin-right: 15px" alt="ES" src=""/>
								<span th:text="#{language.es}">Español</span>
							</a>
						</div>
					</li>
					<li id="accountDropdown" class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-333" data-toggle="dropdown" aria-haspopup="true"
						   aria-expanded="false">
							 <i class="fas fa-user"></i>
							<i class="material-icons">person</i>
							<!--<img th:src="#{url.defaut.ico}" class="rounded-circle z-depth-0" alt="avatar image"-->
							<!--height="35">-->
						</a>
						<div id="dropdownMenuAccount" class="dropdown-menu dropdown-menu-right dropdown-info"
						     aria-labelledby="navbarDropdownMenuLink-333">
							<a sec:authorize="!isAuthenticated()" class="dropdown-item signup" href="/signup" th:text="#{nav.signup}">
								Registrate
							</a>
							<a sec:authorize="!isAuthenticated()" class="dropdown-item login" href="/login" th:text="#{nav.login}">
								Identifícate
							</a>
							<!--/*@thymesVar id="currentUser" type="com.uniovi.entities.User"*/-->
							<a sec:authorize="isAuthenticated()" class="dropdown-item login" th:href="${'/user/details/' + currentUser.getId()}">
								<p th:text="#{nav.user.name(${currentUser.getFullName()})}"></p>
								<p th:text="#{nav.user.money(${currentUser.getMoney()})}"></p>
							</a>
							<a sec:authorize="isAuthenticated()" class="dropdown-item logout" href="/logout">
								Desconectar
							</a>
						</div>
					</li>
				</ul>
			</div>
		</nav>
	</th:block>
	</body>
</html>